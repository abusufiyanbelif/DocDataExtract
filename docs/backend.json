{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents an application user, including their role and permissions.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the User." },
        "name": { "type": "string", "description": "Full name of the user." },
        "email": { "type": "string", "format": "email", "description": "User's email address." },
        "phone": { "type": "string", "description": "User's 10-digit phone number." },
        "loginId": { "type": "string", "description": "Unique login identifier." },
        "userKey": { "type": "string", "description": "System-level unique key." },
        "role": { "type": "string", "enum": ["Admin", "User"], "description": "User's role." },
        "status": { "type": "string", "enum": ["Active", "Inactive"], "description": "User's account status." }
      },
      "required": ["id", "name", "email", "loginId", "userKey", "role", "status"]
    },
    "UserLookup": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserLookup",
      "type": "object",
      "description": "A lookup document to find a user's email by their loginId or phone.",
      "properties": {
        "email": { "type": "string", "format": "email" },
        "userKey": { "type": "string" }
      },
      "required": ["email", "userKey"]
    },
    "Campaign": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Campaign",
      "type": "object",
      "description": "Represents a fundraising or distribution campaign.",
      "properties": {
        "name": { "type": "string" },
        "description": { "type": "string" },
        "category": { "type": "string", "enum": ["Ration", "Relief", "General"] },
        "status": { "type": "string", "enum": ["Upcoming", "Active", "Completed"] },
        "startDate": { "type": "string", "format": "date" },
        "endDate": { "type": "string", "format": "date" },
        "targetAmount": { "type": "number" },
        "authenticityStatus": { "type": "string", "enum": ["Pending Verification", "Verified", "Rejected", "On Hold", "Need More Details"] },
        "publicVisibility": { "type": "string", "enum": ["Hold", "Ready to Publish", "Published"] },
        "allowedDonationTypes": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["Zakat", "Sadqa", "Interest", "Lillah", "Loan", "Monthly Contribution"]
          },
          "description": "A list of donation categories accepted for this campaign."
        }
      },
      "required": ["name", "category", "status", "startDate", "endDate"]
    },
    "Lead": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Lead",
      "type": "object",
      "description": "Represents a potential new initiative or lead.",
      "properties": {
        "name": { "type": "string" },
        "description": { "type": "string" },
        "notes": { "type": "string", "description": "Internal notes or comments about the lead." },
        "category": { "type": "string", "enum": ["Ration", "Relief", "General"] },
        "status": { "type": "string", "enum": ["Upcoming", "Active", "Completed"] },
        "startDate": { "type": "string", "format": "date" },
        "endDate": { "type": "string", "format": "date" },
        "targetAmount": { "type": "number" },
        "authenticityStatus": { "type": "string", "enum": ["Pending Verification", "Verified", "Rejected", "On Hold", "Need More Details"] },
        "publicVisibility": { "type": "string", "enum": ["Hold", "Ready to Publish", "Published"] },
         "allowedDonationTypes": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["Zakat", "Sadqa", "Interest", "Lillah", "Loan", "Monthly Contribution"]
          },
          "description": "A list of donation categories accepted for this lead."
        }
      },
      "required": ["name", "category", "status", "startDate", "endDate"]
    },
    "Beneficiary": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Beneficiary",
      "type": "object",
      "description": "Represents a beneficiary of a campaign or lead.",
      "properties": {
        "name": { "type": "string" },
        "address": { "type": "string" },
        "phone": { "type": "string" },
        "members": { "type": "number" },
        "status": { "type": "string", "enum": ["Given", "Pending", "Hold", "Need More Details", "Verified"] },
        "kitAmount": { "type": "number" },
        "notes": { "type": "string", "description": "Internal notes or comments about the beneficiary." }
      },
      "required": ["name", "status"]
    },
    "Donation": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Donation",
      "type": "object",
      "description": "Represents a single donation transaction.",
      "properties": {
        "campaignId": { "type": "string" },
        "donorName": { "type": "string" },
        "amount": { "type": "number" },
        "typeSplit": {
          "type": "array",
          "description": "Breakdown of donation amounts by category.",
          "items": {
            "type": "object",
            "properties": {
              "category": {
                "type": "string",
                "enum": ["Zakat", "Sadqa", "Interest", "Lillah", "Loan", "Monthly Contribution"]
              },
              "amount": {
                "type": "number"
              }
            },
            "required": ["category", "amount"]
          }
        },
        "donationDate": { "type": "string", "format": "date" },
        "status": { "type": "string", "enum": ["Verified", "Pending", "Canceled"] },
        "comments": { "type": "string", "description": "Comments from the donor or staff." },
        "suggestions": { "type": "string", "description": "Suggestions from the donor or staff." }
      },
      "required": ["donorName", "amount", "typeSplit", "donationDate", "status"]
    },
    "BrandingSettings": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "BrandingSettings",
      "type": "object",
      "description": "Global settings for application branding.",
      "properties": {
        "logoUrl": { "type": "string", "format": "uri" },
        "logoWidth": { "type": "number" },
        "logoHeight": { "type": "number" }
      }
    },
    "PaymentSettings": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "PaymentSettings",
      "type": "object",
      "description": "Global settings for payment and contact information.",
      "properties": {
        "qrCodeUrl": { "type": "string", "format": "uri" },
        "upiId": { "type": "string" },
        "contactEmail": { "type": "string", "format": "email" },
        "address": { "type": "string" },
        "website": { "type": "string", "format": "uri" }
      }
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": { "$ref": "#/entities/User" },
          "description": "Stores user profiles. Access is restricted to the user or an admin.",
          "params": [{"name": "userId", "description": "The unique identifier for the user."}]
        }
      },
      {
        "path": "/campaigns/{campaignId}",
        "definition": {
          "entityName": "Campaign",
          "schema": { "$ref": "#/entities/Campaign" },
          "description": "Stores campaign details. Publicly readable if published.",
          "params": [{"name": "campaignId", "description": "The unique identifier for the campaign."}]
        }
      },
      {
        "path": "/campaigns/{campaignId}/beneficiaries/{beneficiaryId}",
        "definition": {
          "entityName": "Beneficiary",
          "schema": { "$ref": "#/entities/Beneficiary" },
          "description": "Stores beneficiaries for a specific campaign.",
          "params": [
            {"name": "campaignId", "description": "The campaign ID."},
            {"name": "beneficiaryId", "description": "The beneficiary ID."}
          ]
        }
      },
      {
        "path": "/leads/{leadId}",
        "definition": {
          "entityName": "Lead",
          "schema": { "$ref": "#/entities/Lead" },
          "description": "Stores lead details. Publicly readable if published.",
          "params": [{"name": "leadId", "description": "The unique identifier for the lead."}]
        }
      },
      {
        "path": "/leads/{leadId}/beneficiaries/{beneficiaryId}",
        "definition": {
          "entityName": "Beneficiary",
          "schema": { "$ref": "#/entities/Beneficiary" },
          "description": "Stores beneficiaries for a specific lead.",
          "params": [
            {"name": "leadId", "description": "The lead ID."},
            {"name": "beneficiaryId", "description": "The beneficiary ID."}
          ]
        }
      },
      {
        "path": "/donations/{donationId}",
        "definition": {
          "entityName": "Donation",
          "schema": { "$ref": "#/entities/Donation" },
          "description": "Stores individual donation records.",
          "params": [{"name": "donationId", "description": "The unique identifier for the donation."}]
        }
      },
      {
        "path": "/user_lookups/{lookupId}",
        "definition": {
          "entityName": "UserLookup",
          "schema": { "$ref": "#/entities/UserLookup" },
          "description": "Lookup table to find user emails for login.",
          "params": [{"name": "lookupId", "description": "The login ID or phone number."}]
        }
      },
      {
        "path": "/settings/branding",
        "definition": {
          "entityName": "BrandingSettings",
          "schema": { "$ref": "#/entities/BrandingSettings" },
          "description": "Stores branding settings. Only one document exists at this path."
        }
      },
       {
        "path": "/settings/payment",
        "definition": {
          "entityName": "PaymentSettings",
          "schema": { "$ref": "#/entities/PaymentSettings" },
          "description": "Stores payment settings. Only one document exists at this path."
        }
      }
    ],
    "reasoning": "The Firestore data structure is designed with a mix of public and private collections. 'Campaigns' and 'Leads' can be made public, while user-specific data and internal lookups are restricted. Subcollections are used for beneficiaries to keep them tied to a parent campaign/lead."
  }
}
